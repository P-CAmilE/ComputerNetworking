# 第五章练习题

## P3

| 步骤 |   N'    | D(z), p(z) | D(y), p(y) | D(v), p(v) | D(w), p(w) | D(t), p(t) | D(u), p(u) |
| :--: | :-----: | :--------: | :--------: | :--------: | :--------: | :--------: | :--------: |
|  0   |    x    |    8, x    |    6, x    |    3, x    |    6, x    |     ∞      |     ∞      |
|  1   |   xv    |    8, x    |    6, x    |            |    6, x    |    7, v    |    6, v    |
|  2   |   xvy   |    8, x    |            |            |    6, x    |    7, v    |    6, v    |
|  3   |  xvyw   |    8, x    |            |            |            |    7, v    |    6, v    |
|  4   |  xvywu  |    8, x    |            |            |            |    7, v    |            |
|  5   | xvywut  |    8, x    |            |            |            |            |            |
|  6   | xvywutz |            |            |            |            |            |            |

## P5

依据题目要求，显示在节点Z中的距离表表项，按迭代时间排列。

初始时，节点Z的路由选择表：

| 从\到…开销 |  u   |  y   |  v   |  x   |  z   |
| :--------: | :--: | :--: | :--: | :--: | :--: |
|     z      |  ∞   |  ∞   |  6   |  2   |  0   |
|     v      |  ∞   |  ∞   |  ∞   |  ∞   |  ∞   |
|     x      |  ∞   |  ∞   |  ∞   |  ∞   |  ∞   |

第一次迭代后，节点Z的路由选择表：

| 从\到…开销 |  u   |  y   |  v   |  x   |  z   |
| :--------: | :--: | :--: | :--: | :--: | :--: |
|     z      |  7   |  5   |  5   |  2   |  0   |
|     v      |  1   |  ∞   |  0   |  3   |  6   |
|     x      |  ∞   |  3   |  3   |  0   |  2   |

第二次迭代后，节点Z的路由选择表：

| 从\到…开销 |  u   |  y   |  v   |  x   |  z   |
| :--------: | :--: | :--: | :--: | :--: | :--: |
|     z      |  6   |  5   |  5   |  2   |  0   |
|     v      |  1   |  ∞   |  0   |  3   |  5   |
|     x      |  ∞   |  3   |  3   |  0   |  2   |

由于节点Z的距离向量在第二次迭代中发生了改变，所以其会将新的距离向量发送给他的所有直接邻居节点，这就导致了第三次迭代。第三次迭代后，节点Z的路由选择表：

| 从\到…开销 |  u   |  y   |  v   |  x   |  z   |
| :--------: | :--: | :--: | :--: | :--: | :--: |
|     z      |  6   |  5   |  5   |  2   |  0   |
|     v      |  1   |  ∞   |  0   |  3   |  5   |
|     x      |  ∞   |  3   |  3   |  0   |  2   |

第三次迭代后，所有节点的距离向量都没有再发生变换，此时完成该网络各节点的初始化过程。

## P11

**a.** 当距离向量路由选择稳定时，路由器w、y和z相互告知的他们到x的距离如下表中所示：

| 原节点 |     发送目的节点与距离     |
| :----: | :------------------------: |
|   w    | 发送给y，$D_{w}(x)=\infty$ |
|   w    |   发送给z，$D_{w}(x)=5$    |
|   y    |   发送给w，$D_{y}(x)=4$    |
|   y    |   发送给z，$D_{y}(x)=4$    |
|   z    |   发送给y，$D_{z}(x)=6$    |
|   z    | 发送给w，$D_{z}(x)=\infty$ |

**b.** 此时依然会存在无穷计数问题。我们以x与y之间的开销增加到60时开始计算周期，通过下列表格展现迭代过程中前四个周期内各节点内储存节点自己及相邻节点到x的距离：

| 节点\周期 |                    $T_{1}$                    |                    $T_{2}$                     |                     $T_{3}$                     |                     $T_{4}$                     |
| :-------: | :-------------------------------------------: | :--------------------------------------------: | :---------------------------------------------: | :---------------------------------------------: |
|     w     | $D_{w}(x)=5$，$D_{y}(x)=4$，$D_{z}(x)=\infty$ | $D_{w}(x)=10$，$D_{y}(x)=9$，$D_{z}(x)=\infty$ | $D_{w}(x)=10$，$D_{y}(x)=9$，$D_{z}(x)=\infty$  | $D_{w}(x)=10$，$D_{y}(x)=9$，$D_{z}(x)=\infty$  |
|     y     | $D_{w}(x)=\infty$，$D_{y}(x)=9$，$D_{z}(x)=6$ | $D_{w}(x)=\infty$，$D_{y}(x)=9$，$D_{z}(x)=6$  |  $D_{w}(x)=\infty$，$D_{y}(x)=9$，$D_{z}(x)=6$  | $D_{w}(x)=\infty$，$D_{y}(x)=14$，$D_{z}(x)=11$ |
|     z     |   $D_{w}(x)=5$，$D_{y}(x)=4$，$D_{z}(x)=6$    | $D_{w}(x)=5$，$D_{y}(x)=\infty$，$D_{z}(x)=6$  | $D_{w}(x)=10$，$D_{y}(x)=\infty$，$D_{z}(x)=11$ | $D_{w}(x)=10$，$D_{y}(x)=\infty$，$D_{z}(x)=11$ |

可以看出三次一个更新循环，z节点的更新实在一个循环中第三个周期进行的，每次循环中各节点到x的距离加5。所以在第9次循环中的第三个周期时，$min\{ c(z,x)+D_{x}(x),c(z,w)+D_{w}(x) \} = min \{ 50+0,1+50 \} = 50$，z节点到x节点的最短路径选择了从z直接到x的路径，而不是通过w再到x。再到稳定状态的迭代过程如下：

| 节点\周期 |                    $T_{27}$                     |                    $T_{28}$                     |                    $T_{29}$                     |                      $T_{30}$                       |                    $T_{31}$                     |
| :-------: | :---------------------------------------------: | :---------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :---------------------------------------------: |
|     w     | $D_{w}(x)=50$，$D_{y}(x)=49$，$D_{z}(x)=\infty$ |   $D_{w}(x)=50$，$D_{y}(x)=49$，$D_{z}(x)=50$   |   $D_{w}(x)=51$，$D_{y}(x)=53$，$D_{z}(x)=50$   |     $D_{w}(x)=51$，$D_{y}(x)=53$，$D_{z}(x)=50$     | $D_{w}(x)=51$，$D_{y}(x)=\infty$，$D_{z}(x)=50$ |
|     y     | $D_{w}(x)=\infty$，$D_{y}(x)=49$，$D_{z}(x)=46$ | $D_{w}(x)=\infty$，$D_{y}(x)=53$，$D_{z}(x)=50$ | $D_{w}(x)=\infty$，$D_{y}(x)=53$，$D_{z}(x)=50$ |     $D_{w}(x)=51$，$D_{y}(x)=52$，$D_{z}(x)=50$     |   $D_{w}(x)=51$，$D_{y}(x)=52$，$D_{z}(x)=50$   |
|     z     | $D_{w}(x)=50$，$D_{y}(x)=\infty$，$D_{z}(x)=50$ | $D_{w}(x)=50$，$D_{y}(x)=\infty$，$D_{z}(x)=50$ | $D_{w}(x)=50$，$D_{y}(x)=\infty$，$D_{z}(x)=50$ | $D_{w}(x)=\infty$，$D_{y}(x)=\infty$，$D_{z}(x)=50$ | $D_{w}(x)=\infty$，$D_{y}(x)=52$，$D_{z}(x)=50$ |

所以最后再第31个周期中各节点的距离向量没有更新，所以一共经历了**31**次迭代到达了稳定状态。

**c.** 要使得不存在无穷计数问题，每个节点的邻居节点只能有最多有两个，所以当我们去掉y与z两节点之间的链路同时使用毒性逆转时，就没有无穷计数问题。

> **NOTE：**
>
> 若是在毒性逆转方法中，对于某节点的邻居到所有节点的路径中，只要经过了该节点，邻居发送给该节点的距离向量中对应距离都设置为无穷大$\infty$，即无论邻居的路径是直接经过该节点还是先转到其他节点再经过该节点都设置为无穷大$\infty$。这样就不会出现**无穷计数问题**。
>
> eg：
>
> 应用此改进的方法，在本题中第一问里w和z节点发送给y节点的距离$D_{w}(x)=\infty，D_{z}(x)=\infty$。
>
> 这样在$c(x,y)$变为60时，由于在y节点中维护的邻居距离向量中$D_{w}(x)=\infty，D_{z}(x)=\infty$，就不会再将失效的距离信息当作有效的继续进行运算，这样就避免了无穷计数问题。